{% extends "base.html" %}

{% load static i18n %}
{% load game_result %}

{% block page_title %}{% translate "Sezon" %} #{{ object.season.number }} - {% translate "Grupa" %}
    {{ object.name }} - {% translate "Wszystkie gry" %}{% endblock %}

{% block content %}
    <div class="row">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="{% url "seasons-list" %}">{% translate "Sezony" %}</a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="{% url "season-detail" object.season.number %}">
                            {% translate "Sezon" %} #{{ object.season.number }}
                        </a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="{% url "group-detail" season_number=object.season.number group_name=object.name %}">
                            {% translate "Grupa" %} {{ object.name }}
                        </a>
                    </li>
                </ol>
            </nav>
            
            <div class="d-flex justify-content-between mb-2">
                <h3>{% translate "Wszystkie gry" %} - {% translate "Grupa" %} {{ object.name }}</h3>
                <div>
                    <a href="{% url 'group-games' season_number=object.season.number group_name=object.name %}" class="btn btn-sm btn-primary me-1">
                        <i class="fa fa-list"></i> {% translate "Widok rund" %}
                    </a>
                    <a href="{% url 'group-detail' season_number=object.season.number group_name=object.name %}" class="btn btn-sm btn-secondary">
                        <i class="fa fa-arrow-left"></i> {% translate "Grupa" %}
                    </a>
                </div>
            </div>

            <table class="table table-sm table-hover table-striped">
                <thead class="table-light">
                    <tr>
                        <th>R</th>
                        <th>{% translate "Czarny" %}</th>
                        <th>{% translate "Bia≈Çy" %}</th>
                        <th>{% translate "Wynik" %}</th>
                        <th>{% translate "Data" %}</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for game in all_games %}
                        <tr>
                            <td>{{ game.round.number }}</td>
                            <td>{{ game.black.player.nick }} ({{ game.black.rank }})</td>
                            <td>{{ game.white.player.nick }} ({{ game.white.rank }})</td>
                            <td>
                                {% if game.is_played %}
                                    {{ game | result }}
                                {% else %}
                                    -
                                {% endif %}
                                {% if game.is_egd_eligible %}
                                    <span class="badge bg-info ms-1" title="{% translate 'This game is eligible for EGD export' %}">EGD</span>
                                {% endif %}
                            </td>
                            <td>
                                {{ game.date|date:"Y-m-d" }}
                                {% if game.is_delayed %}
                                    <i class="fas fa-exclamation-triangle text-danger"></i>
                                {% endif %}
                            </td>
                            <td>
                                <a href="{{ game.get_absolute_url }}" class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-eye"></i>
                                </a>
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="6" class="text-center">{% translate "Brak gier w tej grupie." %}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}