{% extends "base.html" %}

{% block page_title %}Grupa {{ object.name }}{% endblock %}

{% block content %}
    <div class="row">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url "seasons-list" %}">Sezony</a></li>
                    <li class="breadcrumb-item"><a
                            href="{% url "season-detail" object.season.id %}">Sezon #{{ object.season.number }}</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Grupa {{ object.name }}</li>
                </ol>
            </nav>
            <h2 class="mb-4">Grupa {{ object.name }}</h2>
            <table class="group-table mb-4">
                <thead>
                    <tr>
                        <th></th>
                        {% for member in object.members.all %}
                            <th class="group-table__header"><a href="{% url "player-detail" member.player.nick %}">{{ member.player.nick }}</a></th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for member, results in object.results_as_table %}
                        <tr>
                            <td class="group-table__header"><strong><a href="{% url "player-detail" member.player.nick %}">{{ member.player.nick }}</a></strong></td>
                            {% for result in results %}
                                <td class="group-table__result {% if result is None %}group-table__result--empty{% elif result.value == "W" %}group-table__result--win{% elif result.value == "L" %}group-table__result--lose{% endif %}">
                                    {% if result is not None %}
                                        {{ result.value }}
                                    {% endif %}
                                </td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <h3 class="mb-4">Gry</h3>
            {% for game in object.games.all %}
                <div class="card mb-3">
                    <div class="card-header">{{ game.black.player.nick }} (B) vs {{ game.white.player.nick }} (W)</div>
                    <div class="card-body d-flex justify-content-between align-items-baseline">
                        <p>Wynik: {{ game.result }}</p>
                        <a href="{% url "game-detail" season_number=object.season.number group_name=object.name black_player=game.black.player.nick white_player=game.white.player.nick %}" class="btn btn-primary">Zobacz</a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
